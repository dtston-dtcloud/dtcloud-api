# 简介
	深智云平台为应用端提供用户登录注册、用户信息编辑、设备绑定、应用升级等操作的接口，通讯方式采用HTTPS是，数据格式采用JSON。
## 接口列表
[1. 用户绑定网关](#api_1)
</br>[2. 取消分享](#api_2)
</br>[3. 获取网关用户列表](#api_3)
</br>[4. 获取用户网关列表](#api_4)
</br>[5. 获取用户网关版本列表](#api_5)
</br>[6. 修改网关名称](#api_6)
</br>[7. 分享网关](#api_7)
</br>[8. 用户解绑网关](#api_8)
</br>[9. 清空网关子设备日志](#api_9)
</br>[10. 获取网关子设备日志](#api_10)
</br>[11. 获取网关子设备-获取插座当日当月用电量](#api_11)
</br>[12. 获取网关子设备-插座用电量](#api_12)
</br>[13. 获取网关子设备-温湿度历史数据](#api_13)
</br>
## 接口详情
### <a name='api_1'>1. 用户绑定网关</a>
请求地址

<pre>POST	gateway/bind</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|设备MAC地址|
|name|string|名称|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|object|数据|
|data.id|string|数据id|
|data.gateway_id|string|网关id|

### <a name='api_2'>2. 取消分享</a>
请求地址

<pre>POST	gateway/cancel_share</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|gateway_id|string|网关id|
|id|string|用户网关列表的数据id|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|

### <a name='api_3'>3. 获取网关用户列表</a>
请求地址

<pre>POST	gateway/get_gateway_user_list</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|gateway_id|string|网关id|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.id|string|数据id|
|data.uid|string|用户id|
|data.username|string|用户名|
|data.nickname|string|昵称|
|data.image|string|头像|

### <a name='api_4'>4. 获取用户网关列表</a>
请求地址

<pre>POST	gateway/get_user_gateway_list</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.id|string|数据id|
|data.gateway_id|string|网关id|
|data.name|string|网关名称|
|data.mac|string|网关mac|
|data.status|string|网关在线状态 0-离线、1-在线|

### <a name='api_5'>5. 获取用户网关版本列表</a>
请求地址

<pre>POST	gateway/get_user_gateway_version_list</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.id|string|数据id|
|data.gateway_id|string|网关id|
|data.name|string|网关名称|
|data.mac|string|网关mac|
|data.version|string|网关版本号|
|newest|object|最新版本信息|
|newest.version|string|最新版本号|

### <a name='api_6'>6. 修改网关名称</a>
请求地址

<pre>POST	gateway/rename</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|gateway_id|string|网关id|
|name|string|网关名称|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|

### <a name='api_7'>7. 分享网关</a>
请求地址

<pre>POST	gateway/share</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|gateway_id|string|网关id|
|username|string|账号或手机号或邮箱|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|

### <a name='api_8'>8. 用户解绑网关</a>
请求地址

<pre>POST	gateway/unbind</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|设备MAC地址|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|

### <a name='api_9'>9. 清空网关子设备日志</a>
请求地址

<pre>POST	gateways/sub_device/empty_log</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|网关MAC地址|
|sub_id|string|子设备ID|
|type|string|子设备类型|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|

### <a name='api_10'>10. 获取网关子设备日志</a>
请求地址

<pre>POST	gateways/sub_device/get_log_list</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|网关MAC地址|
|sub_id|string|子设备ID|
|type|string|子设备类型|
|age|string|页码，第1页开始|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.attribute|string|属性值，多个属性用逗号(,)分割|
|data.ctime|string|时间|

### <a name='api_11'>11. 获取网关子设备-获取插座当日当月用电量</a>
请求地址

<pre>POST	gateways/sub_device/get_socket_daymonth_kwh</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|网关MAC地址|
|sub_id|string|子设备ID|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|object|数据|
|data.day|string|当日用电量|
|data.month|string|当月用电量|

### <a name='api_12'>12. 获取网关子设备-插座用电量</a>
请求地址

<pre>POST	gateways/sub_device/get_socket_kwh</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|网关MAC地址|
|sub_id|string|子设备ID|
|type|string|1-每日统计、2-每月统计|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.date|string|日期|
|data.kwh|string|用电量|
|data.ym|string|年月|

### <a name='api_13'>13. 获取网关子设备-温湿度历史数据</a>
请求地址

<pre>POST	gateways/sub_device/get_tmphum_history</pre>

请求参数

|字段|类型|描述|
|--|--|--|
|uid|int|用户id|
|token|string|登录凭证|
|device_mac|string|网关MAC地址|
|sub_id|string|子设备ID|
|type|string|1-今天数据、2-一周数据、3-一月数据|

返回参数

|字段|类型|描述|
|--|--|--|
|errcode|int|返回码，返回0是成功，其余都是错误|
|errmsg|string|错误信息，可以直接显示给用户|
|data|array|数据|
|data.hour|string|小时|
|data.tm|string|温度|
|data.hum|string|湿度|
|data.date|string|日期|

